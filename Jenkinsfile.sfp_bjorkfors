node ('arma') {
  stage('Checkout from Git') {
    checkout scm
  }

  stage('Download latest SFP Objects') {
    bat 'gradlew sfp_objects:downloadMod'
  }

  stage('Download latest SFP Bjorkfors') {
    bat 'gradlew sfp_bjorkfors:downloadMod'
  }

  stage('Run autotest') {
    bat 'gradlew sfp_bjorkfors:runAutotest'
  }

  stage('Copy Log File') {
    bat 'gradlew sfp_bjorkfors:copyLogFile'
  }

  stage('Archive Log File') {
    archiveArtifacts artifacts: 'sfp_bjorkfors/logs/*.rpt'
  }
}
