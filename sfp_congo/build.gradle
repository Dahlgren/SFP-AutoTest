import org.apache.commons.io.FileUtils;

project.ext.mod = 'sfp_congo'
project.ext.mods = [
  '450814997', // CBA_A3
  '894406277', // SFP Nightly
  '1260008396', // SFP Congo Nightly
]

def testMissionTask = createTestMissionTask(testMissionObjectDumper, 'sfp_congo_objectDumper.VR')

task setupTestMission << {
  def spawnSqf = file("${missionDir}/mrg_objectDumper.sqf")
  spawnSqf.append('''
  endMission "END1";
  ''')

  File initSqfFile = file("${missionDir}/init.sqf")
  String initSqf = FileUtils.readFileToString(initSqfFile, "UTF-8")
  initSqf = initSqf.replaceAll("@sfp", "1260008396")
  initSqf = initSqf.replaceAll("_crew = 0", "_crew = 1")
  FileUtils.writeStringToFile(initSqfFile, initSqf, "UTF-8")
}
setupTestMission.dependsOn(testMissionTask)

runAutotest.dependsOn(setupTestMission)
