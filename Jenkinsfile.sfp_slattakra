node ('arma') {
  stage('Checkout from Git') {
    checkout scm
  }

  stage('Download latest SFP Objects') {
    bat 'gradlew sfp_objects:downloadMod'
  }

  stage('Download latest SFP Slättåkra') {
    bat 'gradlew sfp_slattakra:downloadMod'
  }

  stage('Run autotest') {
    bat 'gradlew sfp_slattakra:runAutotest'
  }

  stage('Copy Log File') {
    bat 'gradlew sfp_slattakra:copyLogFile'
  }

  stage('Archive Log File') {
    archiveArtifacts artifacts: 'sfp_slattakra/logs/*.rpt'
  }
}
